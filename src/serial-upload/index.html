<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q10UX Serial Upload - Professional Image Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Roboto+Condensed:wght@400;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="../styles/q10ux.css" rel="stylesheet">
    <link href="serial-upload.css" rel="stylesheet">
</head>
<body>
    <div class="serial-upload-container">
        <!-- Header -->
        <header class="serial-header">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="brand">
                        <div class="brand-logo">
                            <img src="/public/mamp-images/q10ux-sitelogo-256x130.png" alt="Q10UX.com" height="40" class="logo-image me-3">
                            <div class="brand-text">
                                <h1 class="brand-title">Serial Upload</h1>
                                <p class="brand-subtitle">Admin Edition</p>
                            </div>
                        </div>
                        <p class="text-muted">Professional image management & description workflow</p>
                    </div>
                    <div class="header-controls">
                        <!-- Primary Action -->
                        <button class="btn btn-primary me-2" id="adminToggle">
                            <i class="fas fa-cog"></i> Admin Mode
                        </button>
                        
                        <!-- Secondary Actions -->
                        <button class="btn btn-success me-2" id="publishBtn" style="display: none;">
                            <i class="fas fa-rocket"></i> Publish to Case Study
                        </button>
                        <button class="btn btn-secondary me-2" id="previewBtn" style="display: none;">
                            <i class="fas fa-eye"></i> Preview
                        </button>
                        
                        <!-- Tertiary Actions -->
                        <a href="/src/admin/" class="btn btn-outline-primary me-2" target="_blank">
                            <i class="fas fa-external-link-alt"></i> Admin Panel
                        </a>
                        <a href="/src/instant-upload/" class="btn btn-outline-secondary">
                            <i class="fas fa-bolt"></i> Quick Upload
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Upload Interface -->
        <main class="serial-main">
            <div class="container">
                
                <!-- Upload Zone -->
                <div class="upload-section" id="uploadSection">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <div class="serial-upload-zone" id="uploadZone">
                                <div class="upload-content">
                                    <div class="upload-icon">
                                        <i class="fas fa-images"></i>
                                    </div>
                                    <h2>Drop Your Image Series Here</h2>
                                    <p class="upload-description">
                                        Upload multiple images to create a professional carousel with descriptions
                                    </p>
                                    <div class="mode-indicator">
                                        <span class="mode-badge">
                                            <i class="fas fa-layer-group"></i> Professional Mode
                                        </span>
                                        <small class="text-muted">For curated series with detailed descriptions</small>
                                    </div>
                                    
                                    <label for="serialFileInput" class="btn btn-primary btn-lg">
                                        <i class="fas fa-folder-open"></i> Select Images
                                    </label>
                                    <input type="file" id="serialFileInput" multiple accept="image/*" style="display: none;">
                                    
                                    <div class="upload-hints">
                                        <div class="hint-item">
                                            <i class="fas fa-sort-numeric-up"></i>
                                            <span>Automatic ordering by filename</span>
                                        </div>
                                        <div class="hint-item">
                                            <i class="fas fa-magic"></i>
                                            <span>AI-powered description suggestions</span>
                                        </div>
                                        <div class="hint-item">
                                            <i class="fas fa-mobile-alt"></i>
                                            <span>Responsive carousel output</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Existing Case Studies List -->
                <div class="case-studies-section" id="caseStudiesSection">
                    <div class="row justify-content-center">
                        <div class="col-lg-10">
                            <div class="case-studies-header">
                                <h3><i class="fas fa-folder-open"></i> Your Case Studies</h3>
                                <p class="text-muted">Click any case study to attach flows and manage content</p>
                            </div>
                            
                            <div class="case-studies-grid" id="caseStudiesGrid">
                                <!-- Dynamic case studies will be loaded here -->
                                <div class="loading-placeholder">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Loading your case studies...</p>
                                </div>
                            </div>
                            
                            <div class="case-studies-actions">
                                <!-- Primary Action -->
                                <button class="btn btn-primary" onclick="serialUpload.refreshCaseStudies()">
                                    <i class="fas fa-sync-alt"></i> Refresh List
                                </button>
                                
                                <!-- Secondary Action -->
                                <button class="btn btn-secondary" onclick="serialUpload.showInjectionStatus()">
                                    <i class="fas fa-chart-bar"></i> Gallery Status
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Image Management Grid -->
                <div class="management-section" id="managementSection" style="display: none;">
                    <div class="management-header">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <h3><i class="fas fa-layer-group"></i> Image Series Management</h3>
                                <p class="text-muted">Click any image to open in lightbox carousel</p>
                            </div>
                            <div class="series-controls">
                                <!-- Primary Action -->
                                <button class="btn btn-primary me-2" id="addMoreBtn">
                                    <i class="fas fa-plus"></i> Add More Images
                                </button>
                                
                                <!-- Secondary Actions -->
                                <button class="btn btn-secondary me-2" id="previewBtn">
                                    <i class="fas fa-eye"></i> Preview Series
                                </button>
                                
                                <!-- Tertiary Actions -->
                                <button class="btn btn-outline-primary me-2" id="reorderBtn">
                                    <i class="fas fa-arrows-alt"></i> Reorder
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Image Grid -->
                    <div class="image-grid" id="imageGrid">
                        <!-- Dynamic content will be populated here -->
                    </div>

                    <!-- Admin Panel -->
                    <div class="admin-panel" id="adminPanel" style="display: none;">
                        <div class="admin-header">
                            <h4><i class="fas fa-tools"></i> Admin Optimization Panel</h4>
                        </div>
                        <div class="admin-content">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="admin-card">
                                        <h5><i class="fas fa-compress-alt"></i> Bulk Optimization</h5>
                                        <div class="optimization-controls">
                                            <label>Max Width:</label>
                                            <select class="form-select mb-2" id="maxWidth">
                                                <option value="1920">1920px (Full HD)</option>
                                                <option value="1200" selected>1200px (Recommended)</option>
                                                <option value="800">800px (Mobile Optimized)</option>
                                            </select>
                                            
                                            <label>Quality:</label>
                                            <input type="range" class="form-range mb-2" id="qualitySlider" min="60" max="100" value="85">
                                            <span id="qualityValue">85%</span>
                                            
                                            <button class="btn btn-warning w-100" id="optimizeAllBtn">
                                                <i class="fas fa-magic"></i> Optimize All Images
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="admin-card">
                                        <h5><i class="fas fa-robot"></i> AI Descriptions</h5>
                                        <div class="ai-controls">
                                            <label>Description Style:</label>
                                            <select class="form-select mb-2" id="aiStyle">
                                                <option value="professional">Professional</option>
                                                <option value="creative">Creative</option>
                                                <option value="technical">Technical</option>
                                                <option value="casual">Casual</option>
                                            </select>
                                            
                                            <label>Length:</label>
                                            <select class="form-select mb-2" id="aiLength">
                                                <option value="short">Short (1-2 sentences)</option>
                                                <option value="medium" selected>Medium (2-3 sentences)</option>
                                                <option value="long">Long (3-4 sentences)</option>
                                            </select>
                                            
                                            <button class="btn btn-info w-100" id="generateAllDescBtn">
                                                <i class="fas fa-brain"></i> Generate All Descriptions
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="admin-card">
                                        <h5><i class="fas fa-chart-bar"></i> Series Analytics</h5>
                                        <div class="analytics-display">
                                            <div class="metric">
                                                <span class="metric-label">Total Images:</span>
                                                <span class="metric-value" id="totalImages">0</span>
                                            </div>
                                            <div class="metric">
                                                <span class="metric-label">Total Size:</span>
                                                <span class="metric-value" id="totalSize">0 MB</span>
                                            </div>
                                            <div class="metric">
                                                <span class="metric-label">Avg. Description:</span>
                                                <span class="metric-value" id="avgDescription">0 words</span>
                                            </div>
                                            <div class="metric">
                                                <span class="metric-label">Completion:</span>
                                                <span class="metric-value" id="completion">0%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Full-Screen Lightbox Carousel -->
        <div class="lightbox-overlay" id="lightboxOverlay" style="display: none;">
            <div class="lightbox-container">
                <!-- Lightbox Header -->
                <div class="lightbox-header">
                    <div class="lightbox-title">
                        <span id="imageCounter">1 / 5</span>
                        <span id="imageName">image-name.jpg</span>
                    </div>
                    <div class="lightbox-controls">
                        <button class="lightbox-btn" id="fullscreenBtn" title="Toggle Fullscreen">
                            <i class="fas fa-expand"></i>
                        </button>
                        <button class="lightbox-btn" id="downloadBtn" title="Download">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="lightbox-btn" id="closeBtn" title="Close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Main Image Display -->
                <div class="lightbox-main">
                    <div class="image-container">
                        <img id="lightboxImage" src="" alt="">
                        
                        <!-- Navigation Arrows -->
                        <button class="nav-arrow nav-prev" id="prevBtn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="nav-arrow nav-next" id="nextBtn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        
                        <!-- Loading Indicator -->
                        <div class="loading-indicator" id="loadingIndicator">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        
                        <!-- Close Hint -->
                        <div class="close-hint">
                            <i class="fas fa-times"></i>
                            <span>Click outside or press ESC to close</span>
                        </div>
                    </div>
                </div>

                <!-- Description Panel -->
                <div class="description-panel" id="descriptionPanel">
                    <div class="description-content">
                        <div class="description-header">
                            <h4>Image Description</h4>
                            <div class="description-controls">
                                <button class="btn btn-sm btn-outline-primary" id="aiSuggestBtn">
                                    <i class="fas fa-magic"></i> AI Suggest
                                </button>
                                <button class="btn btn-sm btn-outline-secondary" id="saveDescBtn">
                                    <i class="fas fa-save"></i> Save
                                </button>
                            </div>
                        </div>
                        <div class="description-input">
                            <textarea id="imageDescription" placeholder="Enter image description..." rows="3"></textarea>
                            <div class="description-meta">
                                <span class="char-count">0 / 500 characters</span>
                                <span class="word-count">0 words</span>
                            </div>
                        </div>
                    </div>
                </div>

                                        <!-- Navigation Mode Selector -->
                        <div class="navigation-controls">
                            <div class="nav-mode-selector">
                                <button class="nav-mode-btn active" data-mode="linear" title="Linear Flow">
                                    <i class="fas fa-arrow-right"></i> Linear
                                </button>
                                <button class="nav-mode-btn" data-mode="smart" title="Smart Suggestions">
                                    <i class="fas fa-brain"></i> Smart
                                </button>
                                <button class="nav-mode-btn" data-mode="project" title="Project Groups">
                                    <i class="fas fa-folder-tree"></i> Projects
                                </button>
                            </div>
                        </div>

                        <!-- Thumbnail Strip -->
                        <div class="thumbnail-strip" id="thumbnailStrip">
                            <!-- Dynamic thumbnails will be populated here -->
                        </div>

                        <!-- Smart Navigation Panel -->
                        <div class="smart-nav-panel" id="smartNavPanel" style="display: none;">
                            <div class="smart-nav-header">
                                <h5><i class="fas fa-lightbulb"></i> Smart Suggestions</h5>
                                <button class="btn-close-sm" onclick="serialUpload.closeSmartNav()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="smart-suggestions" id="smartSuggestions">
                                <!-- AI-powered navigation suggestions -->
                            </div>
                        </div>

                        <!-- Project Navigation Panel -->
                        <div class="project-nav-panel" id="projectNavPanel" style="display: none;">
                            <div class="project-nav-header">
                                <h5><i class="fas fa-sitemap"></i> Project Groups</h5>
                                <button class="btn-close-sm" onclick="serialUpload.closeProjectNav()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="project-groups" id="projectGroups">
                                <!-- Project-based navigation groups -->
                            </div>
                        </div>
            </div>
        </div>
    </div>

    <!-- Case Study Selection Modal -->
    <div class="modal fade" id="caseStudyModal" tabindex="-1" aria-labelledby="caseStudyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="caseStudyModalLabel">
                        <i class="fas fa-rocket"></i> Publish to Case Study
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="caseStudySelect" class="form-label">Select Case Study:</label>
                        <select class="form-select" id="caseStudySelect">
                            <option value="">Choose a case study...</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="seriesTitle" class="form-label">Series Title:</label>
                        <input type="text" class="form-control" id="seriesTitle" placeholder="Enter a title for this image series">
                    </div>
                    <div class="mb-3">
                        <label for="seriesDescription" class="form-label">Series Description:</label>
                        <textarea class="form-control" id="seriesDescription" rows="3" placeholder="Brief description of this image series"></textarea>
                    </div>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        <strong>Note:</strong> This will create a new image series in the selected case study. 
                        Images will be optimized and descriptions will be preserved.
                    </div>
                </div>
                <div class="modal-footer">
                    <!-- Primary Action -->
                    <button type="button" class="btn btn-success" id="confirmPublishBtn">
                        <i class="fas fa-rocket"></i> Publish Series
                    </button>
                    
                    <!-- Secondary Action -->
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="serial-footer">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="footer-brand">
                        <img src="/public/mamp-images/q10ux-sitelogo-256x130.png" alt="Q10UX" height="30" class="footer-logo">
                        <span class="footer-text">Professional UX Portfolio Management</span>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <div class="footer-links">
                        <a href="/" class="footer-link">
                            <i class="fas fa-home"></i> Portfolio
                        </a>
                        <a href="/src/admin/" class="footer-link">
                            <i class="fas fa-cog"></i> Admin
                        </a>
                        <a href="/src/instant-upload/" class="footer-link">
                            <i class="fas fa-bolt"></i> Quick Upload
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-divider"></div>
            <div class="row">
                <div class="col-12 text-center">
                    <p class="footer-copyright">
                        © 2024 Q10UX. Professional UX case study management system.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="serial-upload.js"></script>
</body>
</html>
